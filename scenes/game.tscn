[gd_scene load_steps=7 format=2]

[ext_resource path="res://scenes/menus/main.tscn" type="PackedScene" id=1]
[ext_resource path="res://scenes/menus/config.tscn" type="PackedScene" id=2]
[ext_resource path="res://admob-lib/admob.gd" type="Script" id=3]
[ext_resource path="res://scenes/menus/help.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

# Insert your view paths here
onready var views : Dictionary = {
	\"main\": $main,
	\"config\": $config,
	\"help\": $help
}
onready var last_view = views[\"main\"]
onready var alert_resource : Resource = preload(\"res://addons/CoolButtonsLibrary/alerts/cbAlert.tscn\")
	
func _ready() -> void:
	setup()

func setup() -> void:
	$AdMob.load_banner()
	$AdMob.load_interstitial()
	$AdMob.load_rewarded_video()
	if(Engine.has_singleton(\"GodotAdMob\")):
		instance_alert(\"si admob\", Color(255, 255, 255))
	else:
		instance_alert(\"no admobr\", Color(255, 255, 255))
		
	for view in views:
		views[view].visible = false
		views[view].position = Vector2(720, 0)
	views[\"main\"].visible = true
	views[\"main\"].position = Vector2(0, 0)

func change_view(new_view) -> void:
	if(last_view != new_view):
		for view in views:
			views[view].visible = false
		last_view.visible = true
		new_view.visible = true
		var tween : Tween = Tween.new()
		var tween_instance = add_child(tween)
		tween.interpolate_property(last_view, \"position\", last_view.position, Vector2(720, 0), 1.0, Tween.TRANS_CUBIC, Tween.EASE_IN)
		tween.start()
		yield(get_tree().create_timer(0.68), \"timeout\")
		tween.interpolate_property(new_view, \"position\", Vector2(-720, 0), Vector2(0, 0), 1.0, Tween.TRANS_CUBIC, Tween.EASE_OUT)
		tween.start()
		last_view = new_view
		yield(get_tree().create_timer(1), \"timeout\")		
		tween.queue_free()

# Use String param \"desc\" to set the alert's message
# Use values from 0 to 255 for RGB values in Color
func instance_alert(desc : String, color : Color) -> void:
	var alert : TextureRect = alert_resource.instance()
	alert.set_description(desc)
	alert.set_color(color)
	add_child(alert)
"

[sub_resource type="Theme" id=2]

[node name="game" type="Node2D"]
script = SubResource( 1 )

[node name="AdMob" type="Node" parent="."]
script = ExtResource( 3 )
banner_on_top = false
banner_size = "SMART_BANNER"
banner_id = "ca-app-pub-3940256099942544/6300978111"
interstitial_id = "ca-app-pub-3940256099942544/1033173712"
rewarded_id = "ca-app-pub-3940256099942544/5224354917"
is_personalized = false

[node name="ui" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 720.0
margin_bottom = 1280.0
rect_min_size = Vector2( 720, 1280 )
theme = SubResource( 2 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="background" type="ColorRect" parent="ui"]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.109804, 0.219608, 0.301961, 1 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="config" parent="." instance=ExtResource( 2 )]

[node name="help" parent="." instance=ExtResource( 4 )]

[node name="main" parent="." instance=ExtResource( 1 )]
[connection signal="banner_failed_to_load" from="AdMob" to="." method="_on_AdMob_banner_failed_to_load"]
[connection signal="banner_loaded" from="AdMob" to="." method="_on_AdMob_banner_loaded"]
